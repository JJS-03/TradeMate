
@baseUrl = http://localhost:8080
@email = seller1@test.com
@password = 12345678
# 로그인 후 발급된 token(eyJ...)을 아래에 붙여넣으세요. (Bearer 제외)
@accessToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiI2IiwiZW1haWwiOiJzZWxsZXIxQHRlc3QuY29tIiwiaWF0IjoxNzcxNDIwNzYxLCJleHAiOjE3NzE0MjQzNjF9.TnenNDWgAtfmDaYXHbrTqmOHCxYQscpKEhbe3F7D4LXgdJVL54sid8GiuFt4QjZe
### 0) 회원가입 (최초 1회만 실행)
### 이미 가입된 이메일이면 409(DUPLICATE_EMAIL)가 정상입니다.
POST {{baseUrl}}/api/users/signup
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}",
  "nickname": "seller1"
}

### 1) 로그인 (항상 이 요청으로 토큰 재발급)
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}

> {%
    // response.body.token 값을 accessToken 변수로 저장
    client.global.set("accessToken", response.body.token);
%}

### 2) 상품 등록 (정상: 201)
### 주의: accessToken에는 Bearer 없이 '토큰 문자열만' 저장되어야 함
POST {{baseUrl}}/api/items
Content-Type: application/json
Authorization: Bearer {{accessToken}}
# 만약 여전히 401이면 로그인 응답의 token(eyJ...)만 복사해 아래 Authorization 헤더의 {{accessToken}} 값으로 사용

{
  "title": "아이폰 14",
  "description": "거의 새 상품입니다.",
  "price": 900000
}

### 3) 상품 등록 (Authorization 누락: 401)
POST {{baseUrl}}/api/items
Content-Type: application/json

{
  "title": "맥북 프로",
  "description": "M1 16인치",
  "price": 1800000
}

### 4) 상품 등록 (title 공백: 400)
POST {{baseUrl}}/api/items
Content-Type: application/json
Authorization: Bearer {{accessToken}}
# 만약 여전히 401이면 로그인 응답의 token(eyJ...)만 복사해 아래 Authorization 헤더의 {{accessToken}} 값으로 사용

{
  "title": "",
  "description": "제목 누락 테스트",
  "price": 10000
}

### 5) 상품 등록 (price 음수: 400)
POST {{baseUrl}}/api/items
Content-Type: application/json
Authorization: Bearer {{accessToken}}
# 만약 여전히 401이면 로그인 응답의 token(eyJ...)만 복사해 아래 Authorization 헤더의 {{accessToken}} 값으로 사용

{
  "title": "키보드",
  "description": "price 음수 테스트",
  "price": -100
}